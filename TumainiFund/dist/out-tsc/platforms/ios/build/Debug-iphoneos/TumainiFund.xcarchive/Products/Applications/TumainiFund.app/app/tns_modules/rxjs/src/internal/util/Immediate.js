let nextHandle = 1;
const tasksByHandle = {};
function runIfPresent(handle) {
    const cb = tasksByHandle[handle];
    if (cb) {
        cb();
    }
}
export const Immediate = {
    setImmediate(cb) {
        const handle = nextHandle++;
        tasksByHandle[handle] = cb;
        Promise.resolve().then(() => runIfPresent(handle));
        return handle;
    },
    clearImmediate(handle) {
        delete tasksByHandle[handle];
    },
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW1tZWRpYXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcGxhdGZvcm1zL2lvcy9idWlsZC9EZWJ1Zy1pcGhvbmVvcy9UdW1haW5pRnVuZC54Y2FyY2hpdmUvUHJvZHVjdHMvQXBwbGljYXRpb25zL1R1bWFpbmlGdW5kLmFwcC9hcHAvdG5zX21vZHVsZXMvcnhqcy9zcmMvaW50ZXJuYWwvdXRpbC9JbW1lZGlhdGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBSSxVQUFVLEdBQUcsQ0FBQyxDQUFDO0FBRW5CLE1BQU0sYUFBYSxHQUFxQyxFQUFFLENBQUM7QUFFM0QsU0FBUyxZQUFZLENBQUMsTUFBYztJQUNsQyxNQUFNLEVBQUUsR0FBRyxhQUFhLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDakMsSUFBSSxFQUFFLEVBQUU7UUFDTixFQUFFLEVBQUUsQ0FBQztLQUNOO0FBQ0gsQ0FBQztBQUVELE1BQU0sQ0FBQyxNQUFNLFNBQVMsR0FBRztJQUN2QixZQUFZLENBQUMsRUFBYztRQUN6QixNQUFNLE1BQU0sR0FBRyxVQUFVLEVBQUUsQ0FBQztRQUM1QixhQUFhLENBQUMsTUFBTSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQzNCLE9BQU8sQ0FBQyxPQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7UUFDbkQsT0FBTyxNQUFNLENBQUM7SUFDaEIsQ0FBQztJQUVELGNBQWMsQ0FBQyxNQUFjO1FBQzNCLE9BQU8sYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQy9CLENBQUM7Q0FDRixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsibGV0IG5leHRIYW5kbGUgPSAxO1xuXG5jb25zdCB0YXNrc0J5SGFuZGxlOiB7IFtoYW5kbGU6IHN0cmluZ106ICgpID0+IHZvaWQgfSA9IHt9O1xuXG5mdW5jdGlvbiBydW5JZlByZXNlbnQoaGFuZGxlOiBudW1iZXIpIHtcbiAgY29uc3QgY2IgPSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gIGlmIChjYikge1xuICAgIGNiKCk7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IEltbWVkaWF0ZSA9IHtcbiAgc2V0SW1tZWRpYXRlKGNiOiAoKSA9PiB2b2lkKTogbnVtYmVyIHtcbiAgICBjb25zdCBoYW5kbGUgPSBuZXh0SGFuZGxlKys7XG4gICAgdGFza3NCeUhhbmRsZVtoYW5kbGVdID0gY2I7XG4gICAgUHJvbWlzZS5yZXNvbHZlKCkudGhlbigoKSA9PiBydW5JZlByZXNlbnQoaGFuZGxlKSk7XG4gICAgcmV0dXJuIGhhbmRsZTtcbiAgfSxcblxuICBjbGVhckltbWVkaWF0ZShoYW5kbGU6IG51bWJlcik6IHZvaWQge1xuICAgIGRlbGV0ZSB0YXNrc0J5SGFuZGxlW2hhbmRsZV07XG4gIH0sXG59O1xuIl19